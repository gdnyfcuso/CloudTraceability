ko.bootstrap=(function(){if(window.ko===undefined){throw"ko.bootstrap is dependant on knockout";}if(window.ko.bindingConventions===undefined){throw"ko.bootstrap is dependant on ko.bindingConventions";}Api=function(c,b){this.shared="shared";this.currentView=null;this.datasource=c;this.templateCache={};this.initEngine();this.loadTemplates(this.shared,b);};Api.prototype={initEngine:function(){var c=new ko.nativeTemplateEngine();var b=this;c.makeTemplateSource=function(d){return new a(d,b);};ko.setTemplateEngine(c);},loadTemplates:function(d,b){var c=function(e){this.templateCache[d]=e;this.currentView=e;b();}.bind(this);if(this.templateCache[d]!==undefined){c(this.templateCache[d]);}else{this.datasource.loadTemplates(d,c.bind(this));}},loadView:function(d,b){var e="Model";var g="View";var c=ko.bindingConventions.utils.findConstructorName(d);var f=c.substring(0,c.length-e.length);if(f.endsWith(g)){f=f.substr(0,f.length-g.length);}this.loadTemplates(f,function(){b(d);});}};var a=function(c,b){this.template=c;this.api=b;};a.prototype.text=function(){var b=this.api.currentView[this.template]||this.api.templateCache[this.api.shared][this.template];if(b==null){throw"View '"+this.template+"' could not be found";}return b;};return{init:function(c,b){return new Api(c,b);}};})();